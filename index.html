<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G·ª≠i Chinh iu</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { 
            margin: 0; 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #fff0f3; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            height: 100vh; 
            text-align: center; 
            overflow: hidden;
        }
        .container { padding: 20px; z-index: 1; }
        button { 
            cursor: pointer; 
            border-radius: 12px; 
            border: none; 
            color: white; 
            margin: 10px; 
            padding: 12px 24px; 
            font-weight: bold;
            transition: 0.3s; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .btn-yes { background-color: #28a745; }
        .btn-no { background-color: #dc3545; }
        h1 { color: #d63384; text-shadow: 1px 1px 2px rgba(0,0,0,0.05); }
    </style>
</head>
<body>
    <div id="root"></div>

    <audio id="bgMusic" loop>
        <source src="https://raw.githubusercontent.com/LInh-04/music-storage/main/my-love-mine-all-mine.mp3" type="audio/mpeg">
    </audio>

    <script type="text/babel">
        const NO_PHRASES = [
            "Kh√¥ng ƒë√¢u üíî",
            "Chinh ∆°i, ƒë·ª´ng gi·∫≠n anh n·ªØa m√†... ü•∫",
            "Anh bi·∫øt l·ªói v·ªõi Chinh r·ªìi! üíï",
            "M·ªôt c∆° h·ªôi cu·ªëi th√¥i m√† Chinh ∆°i?",
            "ƒê·ª´ng l√†m tim anh tan v·ª°, Chinh nh√© :(",
            "Chinh suy nghƒ© l·∫°i ƒëi m√†...",
            "Chinh m√† c·ª© th·∫ø n√†y l√† anh kh√≥c th·∫≠t ƒë·∫•y!"
        ];

        function App() {
            const [noClicks, setNoClicks] = React.useState(0);
            const [isForgiven, setIsForgiven] = React.useState(false);
            const audioRef = React.useRef(null);

            React.useEffect(() => {
                audioRef.current = document.getElementById("bgMusic");
                if (audioRef.current) {
                    audioRef.current.volume = 0.5; // √Çm l∆∞·ª£ng v·ª´a ph·∫£i
                }
            }, []);

            const playMusic = () => {
                if (audioRef.current) {
                    audioRef.current.play().catch(e => console.log("Ch·ªù t∆∞∆°ng t√°c ƒë·ªÉ ph√°t nh·∫°c"));
                }
            };

            const handleNo = () => {
                setNoClicks(noClicks + 1);
                playMusic();
            };

            const handleYes = () => {
                setIsForgiven(true);
                playMusic();
                
                // Hi·ªáu ·ª©ng ph√°o hoa tr√°i tim
                const duration = 5 * 1000;
                const animationEnd = Date.now() + duration;
                const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

                const interval = setInterval(function() {
                    const timeLeft = animationEnd - Date.now();
                    if (timeLeft <= 0) return clearInterval(interval);
                    const particleCount = 50 * (timeLeft / duration);
                    confetti({ ...defaults, particleCount, origin: { x: Math.random(), y: Math.random() - 0.2 }, shapes: ['heart'], colors: ['#ff4d6d', '#ff758f', '#ffb3c1'] });
                }, 250);
            };

            const yesButtonSize = (noClicks * 20) + 18;

            if (isForgiven) {
                return (
                    <div className="container">
                        <img src="https://media.tenor.com/f1xnRxTRxLAAAAAj/bears-with-kisses-bg.gif" width="200" />
                        <h1 style={{ color: "#ff4d6d", fontSize: "40px" }}>Y√™u Chinh nh·∫•t tr√™n ƒë·ªùi! üíñüéâ</h1>
                        <p style={{ color: "#555" }}>C·∫£m ∆°n Chinh ƒë√£ h·∫øt gi·∫≠n anh nh√©!</p>
                    </div>
                );
            }

            return (
                <div className="container">
                    <img src="https://media.tenor.com/VIChDQ6ejRQAAAAj/jumping-bear-hearts-no-png.gif" width="200" />
                    <h1>Chinh ∆°i ƒë·ª´ng gi·∫≠n anh n·ªØa m√† üíò</h1>
                    <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', flexWrap: 'wrap' }}>
                        <button 
                            className="btn-yes"
                            onClick={handleYes} 
                            style={{ fontSize: `${yesButtonSize}px` }}
                        >
                            H·∫øt gi·∫≠n r√πi
                        </button>
                        <button 
                            className="btn-no"
                            onClick={handleNo} 
                            style={{ fontSize: "18px" }}
                        >
                            {noClicks === 0 ? "Kh√¥ng" : NO_PHRASES[Math.min(noClicks - 1, NO_PHRASES.length - 1)]}
                        </button>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
